<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>MDX Viewer - Preview API Test</title>
        <style>
            body {
                font-family:
                    -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
                    sans-serif;
                margin: 20px;
                background: #f5f5f5;
            }
            .test-section {
                background: white;
                border-radius: 8px;
                padding: 20px;
                margin: 20px 0;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }
            .preview-test {
                display: flex;
                flex-wrap: wrap;
                gap: 16px;
            }
            .preview-card {
                width: 400px;
                border: 1px solid #ddd;
                border-radius: 8px;
                overflow: hidden;
                background: white;
            }
            .preview-image {
                width: 100%;
                height: 240px;
                object-fit: cover;
                background: #f0f0f0;
            }
            .preview-info {
                padding: 12px;
            }
            .preview-title {
                font-weight: bold;
                margin-bottom: 4px;
            }
            .preview-url {
                font-size: 12px;
                color: #666;
                font-family: monospace;
                word-break: break-all;
            }
            .status {
                padding: 4px 8px;
                border-radius: 4px;
                font-size: 12px;
                font-weight: bold;
            }
            .status.success {
                background: #d4edda;
                color: #155724;
            }
            .status.error {
                background: #f8d7da;
                color: #721c24;
            }
            .status.loading {
                background: #fff3cd;
                color: #856404;
            }
        </style>
    </head>
    <body>
        <h1>üöÄ MDX Viewer - Preview API Test</h1>

        <div class="test-section">
            <h2>üìÅ Direct SVG Preview Tests</h2>
            <p>Testing the SVG previews we created directly:</p>

            <div class="preview-test">
                <div class="preview-card">
                    <img
                        src="public/previews/docs/getting-started.svg"
                        alt="Getting Started"
                        class="preview-image"
                    />
                    <div class="preview-info">
                        <div class="preview-title">
                            Getting Started (Direct SVG)
                        </div>
                        <div class="preview-url">
                            public/previews/docs/getting-started.svg
                        </div>
                    </div>
                </div>

                <div class="preview-card">
                    <img
                        src="public/previews/docs/component-best-practices.svg"
                        alt="Component Best Practices"
                        class="preview-image"
                    />
                    <div class="preview-info">
                        <div class="preview-title">
                            Component Best Practices (Direct SVG)
                        </div>
                        <div class="preview-url">
                            public/previews/docs/component-best-practices.svg
                        </div>
                    </div>
                </div>

                <div class="preview-card">
                    <img
                        src="public/previews/examples/components-showcase.svg"
                        alt="Components Showcase"
                        class="preview-image"
                    />
                    <div class="preview-info">
                        <div class="preview-title">
                            Components Showcase (Direct SVG)
                        </div>
                        <div class="preview-url">
                            public/previews/examples/components-showcase.svg
                        </div>
                    </div>
                </div>

                <div class="preview-card">
                    <img
                        src="public/previews/examples/interactive-demo.svg"
                        alt="Interactive Demo"
                        class="preview-image"
                    />
                    <div class="preview-info">
                        <div class="preview-title">
                            Interactive Demo (Direct SVG)
                        </div>
                        <div class="preview-url">
                            public/previews/examples/interactive-demo.svg
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>üîó API Endpoint Tests</h2>
            <p>Testing the /api/previews endpoint (requires server running):</p>
            <p><strong>Start server with:</strong> <code>npm run dev</code></p>

            <div class="preview-test">
                <div class="preview-card">
                    <img
                        src="/api/previews/docs/getting-started.png"
                        alt="Getting Started API"
                        class="preview-image"
                        data-test="api"
                    />
                    <div class="preview-info">
                        <div class="preview-title">Getting Started (API)</div>
                        <div class="preview-url">
                            /api/previews/docs/getting-started.png
                        </div>
                        <div class="status loading">Loading...</div>
                    </div>
                </div>

                <div class="preview-card">
                    <img
                        src="/api/previews/docs/component-best-practices.png"
                        alt="Component Best Practices API"
                        class="preview-image"
                        data-test="api"
                    />
                    <div class="preview-info">
                        <div class="preview-title">
                            Component Best Practices (API)
                        </div>
                        <div class="preview-url">
                            /api/previews/docs/component-best-practices.png
                        </div>
                        <div class="status loading">Loading...</div>
                    </div>
                </div>

                <div class="preview-card">
                    <img
                        src="/api/previews/examples/components-showcase.png"
                        alt="Components Showcase API"
                        class="preview-image"
                        data-test="api"
                    />
                    <div class="preview-info">
                        <div class="preview-title">
                            Components Showcase (API)
                        </div>
                        <div class="preview-url">
                            /api/previews/examples/components-showcase.png
                        </div>
                        <div class="status loading">Loading...</div>
                    </div>
                </div>

                <div class="preview-card">
                    <img
                        src="/api/previews/docs/file-management-system.png"
                        alt="File Management API"
                        class="preview-image"
                        data-test="api"
                    />
                    <div class="preview-info">
                        <div class="preview-title">
                            File Management System (API)
                        </div>
                        <div class="preview-url">
                            /api/previews/docs/file-management-system.png
                        </div>
                        <div class="status loading">Loading...</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>üìä Preview Summary</h2>
            <div id="summary">
                <p>
                    üéØ <strong>Direct SVG Files:</strong>
                    <span id="direct-count">0</span> loaded
                </p>
                <p>
                    üîó <strong>API Endpoints:</strong>
                    <span id="api-count">0</span> loaded
                </p>
                <p>
                    ‚ùå <strong>Failed:</strong>
                    <span id="error-count">0</span> errors
                </p>
            </div>
        </div>

        <script>
            let directCount = 0;
            let apiCount = 0;
            let errorCount = 0;

            function updateSummary() {
                document.getElementById("direct-count").textContent =
                    directCount;
                document.getElementById("api-count").textContent = apiCount;
                document.getElementById("error-count").textContent = errorCount;
            }

            // Handle all images
            document.querySelectorAll("img").forEach(img => {
                const isApi = img.hasAttribute("data-test");
                const statusElement = isApi
                    ? img.closest(".preview-card").querySelector(".status")
                    : null;

                img.onload = function () {
                    if (isApi) {
                        apiCount++;
                        if (statusElement) {
                            statusElement.textContent = "Loaded ‚úÖ";
                            statusElement.className = "status success";
                        }
                    } else {
                        directCount++;
                    }
                    updateSummary();
                };

                img.onerror = function () {
                    errorCount++;
                    if (isApi && statusElement) {
                        statusElement.textContent = "Failed ‚ùå";
                        statusElement.className = "status error";
                    }
                    this.style.background = "#f0f0f0";
                    this.style.border = "2px dashed #ccc";
                    this.alt = "Preview not available - " + this.alt;
                    updateSummary();
                };
            });

            // Initial summary update
            updateSummary();
        </script>
    </body>
</html>
