# Instrucciones Universales para el Agente AI

## Contexto del Proyecto

Este es **MDXViewer**, un visualizador de archivos MDX construido con:

-   **Frontend**: React 19 + TypeScript + Vite + Tailwind CSS
-   **Backend**: Express.js + Node.js
-   **UI Components**: shadcn/ui
-   **Features**: File management, theme switching, real-time preview

## Principios de Desarrollo OBLIGATORIOS

### 🎯 1. Arquitectura y Patrones

-   **SIEMPRE** usar TypeScript con tipado estricto
-   **SIEMPRE** seguir la arquitectura de componentes existente
-   **SIEMPRE** usar React Query para gestión de estado servidor
-   **SIEMPRE** implementar componentes reutilizables en `src/components/ui/`
-   **SIEMPRE** usar custom hooks para lógica compleja en `src/hooks/`

### 🎨 2. Estilo y UI

-   **SIEMPRE** usar Tailwind CSS para estilos
-   **SIEMPRE** usar componentes de shadcn ui cuando sea posible
-   **SIEMPRE** implementar modo oscuro/claro usando el ThemeProvider existente
-   **SIEMPRE** seguir el sistema de design tokens establecido
-   **SIEMPRE** hacer la UI responsive (mobile-first)

### 📁 3. Estructura de Archivos

```text
src/
├── components/        # Componentes reutilizables
│   ├── ui/           # Componentes base (shadcn)
│   └── globals/      # Componentes globales
├── features/         # Features por dominio
├── hooks/           # Custom hooks
├── lib/             # Utilidades y configuraciones
├── api/             # API clients y tipos
├── types/           # Definiciones de tipos
└── utils/           # Funciones utilitarias

public/content/        # Documentos MD/MDX generados
├── docs/             # Documentación general
├── guides/           # Guías y tutoriales
├── examples/         # Ejemplos de código
└── api/              # Documentación de API

scripts/
├── js/               # Scripts JavaScript para testing
└── sh/               # Scripts de shell (.sh)
```

### 📂 4. Organización de Archivos Generados

-   **SIEMPRE** colocar documentos .md/.mdx generados en `public/content/`
-   **SIEMPRE** crear subcarpetas apropiadas dentro de `public/content/` según el tipo de documento
-   **SIEMPRE** colocar scripts .sh generados en `scripts/sh/`
-   **SIEMPRE** colocar scripts .js de testing en `scripts/js/`
-   **SIEMPRE** usar nombres descriptivos en inglés para carpetas y archivos

### 🔧 4. Reglas de Código

-   **SIEMPRE** usar nombres descriptivos en inglés
-   **SIEMPRE** escribir JSDoc para funciones complejas
-   **SIEMPRE** usar const assertions donde sea apropiado
-   **SIEMPRE** implementar error boundaries
-   **SIEMPRE** usar React.memo para optimización cuando sea necesario
-   **SIEMPRE** validar props con TypeScript interfaces

### 🌐 5. Idioma y Localización

-   **SIEMPRE** usar inglés como idioma de desarrollo
-   **SIEMPRE** escribir código, comentarios, variables y funciones en inglés
-   **SIEMPRE** usar terminología técnica en inglés
-   **SIEMPRE** escribir mensajes de error y logs en inglés
-   **SIEMPRE** documentar en inglés (README, comentarios, JSDoc)

### 🚀 5. Performance y Optimización

-   **SIEMPRE** usar lazy loading para rutas
-   **SIEMPRE** optimizar renders con useMemo/useCallback
-   **SIEMPRE** implementar debounce en búsquedas
-   **SIEMPRE** usar React.Suspense para carga asíncrona

### 🧪 6. Testing y Debugging

-   **SIEMPRE** agregar console.log detallados durante desarrollo
-   **SIEMPRE** usar nombres de clase CSS descriptivos para debugging
-   **SIEMPRE** implementar fallbacks para estados de error

### 📱 7. UX/UI Guidelines

-   **SIEMPRE** mostrar loading states
-   **SIEMPRE** mostrar estados vacíos con mensajes útiles
-   **SIEMPRE** implementar feedback visual para acciones del usuario
-   **SIEMPRE** usar transiciones suaves (transition-all duration-200)
-   **SIEMPRE** hacer accesible (ARIA labels, keyboard navigation)

### 🔄 8. Workflow y Comandos

-   **SIEMPRE** usar `npm run dev:watch` para desarrollo con hot reload
-   **SIEMPRE** generar índice de contenido con `npm run generate:index`
-   **SIEMPRE** validar con ESLint antes de commits

## Patrones de Código Requeridos

### Componente Base

```tsx
interface ComponentProps {
    // Props typed in English
}

export const Component: React.FC<ComponentProps> = (
    {
        // Destructuring with defaults
    }
) => {
    // Hooks in order: useState, useEffect, custom hooks

    return (
        <div className="responsive-classes">{/* Clean and semantic JSX */}</div>
    );
};
```

### Custom Hook

```tsx
export const useCustomHook = () => {
    // Hook logic in English

    return {
        // Return object typed in English
    };
};
```

### API Call

```tsx
export const useAPIQuery = () => {
    return useQuery({
        queryKey: ["descriptive-key"],
        queryFn: async () => {
            // Fetch logic with error handling in English
        },
        staleTime: 5 * 60 * 1000, // 5 minutes
    });
};
```

## Organización de Archivos - Ejemplos

### ✅ Documentos MD/MDX Correctos

```text
public/content/docs/installation-guide.md
public/content/guides/getting-started.md
public/content/examples/basic-component.mdx
public/content/api/file-system-api.md
```

### ✅ Scripts de Testing Correctos

```text
scripts/js/test-file-manager.js
scripts/js/test-depth-validation.js
scripts/js/test-drag-drop.js
```

### ✅ Scripts de Shell Correctos

```text
scripts/sh/install-dependencies.sh
scripts/sh/build-and-deploy.sh
scripts/sh/validate-project.sh
```

### ❌ Ubicaciones Incorrectas

```text
❌ src/docs/guide.md              (debe ir en public/content/docs/)
❌ scripts/test-file.js           (debe ir en scripts/js/)
❌ test-script.sh                 (debe ir en scripts/sh/)
❌ public/mi-guia.md             (debe usar inglés: my-guide.md)
```

## Respuestas del Agente

### ✅ SIEMPRE hacer

1. Read project context before making changes
2. Follow existing folder structure and file organization rules
3. Use existing dependencies
4. Create code that integrates well with existing codebase
5. Explain reasoning behind decisions
6. **Use English for all code, comments, and documentation**
7. **Place .md/.mdx files in appropriate `public/content/` subdirectories**
8. **Place .sh scripts in `scripts/sh/` directory**
9. **Place .js test scripts in `scripts/js/` directory**

### ❌ NUNCA hacer

1. Change fundamental architecture without consulting
2. Add unnecessary dependencies
3. Use plain JavaScript instead of TypeScript
4. Ignore existing theme system
5. Create components that don't follow established patterns
6. **Use Spanish or other languages in code/comments**
7. **Place generated files in wrong directories**
8. **Create files with non-English names**

## Comandos de Desarrollo Frecuentes

```bash
# Desarrollo con hot reload
npm run dev:watch

# Solo frontend
npm run client

# Solo backend
npm run server

# Generar índice de contenido
npm run generate:index

# Build para producción
npm run build
```

---

_Este archivo debe ser consultado ANTES de realizar cualquier cambio en el proyecto._
